(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,a){},196:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(89),i=a.n(o),l=a(21),s=a(5);function c(e){function t(){return"overview"!==e.gameState.playerView||"Spar"!==e.gameState.curLoc&&"Battle"!==e.gameState.curLoc?"overview"===e.gameState.playerView?r.a.createElement("div",null,"Gold: ",e.gameState.gold,r.a.createElement("br",null),"Health: ",e.gameState.player.health,r.a.createElement("br",null),"Constitution: ",e.gameState.player.cst,r.a.createElement("br",null),"Attack: ",e.gameState.player.atk,r.a.createElement("br",null),"Defense: ",e.gameState.player.def,r.a.createElement("br",null),"Agility: ",e.gameState.player.agi,r.a.createElement("br",null),"Intelligence: ",e.gameState.player.int,r.a.createElement("br",null),"Influence: ",e.gameState.player.inf,r.a.createElement("br",null),"Reputation: ",e.gameState.player.rep,r.a.createElement("br",null),"Passives: ",e.gameState.player.passive):void 0:r.a.createElement("div",null,"HP: ",e.gameState.SBState.playerHp,r.a.createElement("br",null),"Energy: ",e.gameState.SBState.playerEnergy,r.a.createElement("br",null),"ATK: ",e.gameState.SBState.playerAtk,r.a.createElement("br",null),"DEF: ",e.gameState.SBState.playerDef,r.a.createElement("br",null),"AGI: ",e.gameState.SBState.playerAgi,r.a.createElement("br",null),"INT: ",e.gameState.SBState.playerInt,r.a.createElement("br",null),"Status:",e.gameState.SBState.playerStatus.map(function(e){return r.a.createElement("t",{key:e},r.a.createElement("br",null),e)}),r.a.createElement("br",null),"Passives:",e.gameState.SBState.playerPassive.map(function(t){return r.a.createElement("t",{key:t},r.a.createElement("br",null),e.gameState.SkillData[t].name)}))}function a(){var t=["ATK","DEF","AGI","SPE"],a=void 0;function n(e){var a=document.getElementById("Skill-options-info"),n=document.getElementById("Skill-names-info");if("NONE"===e)a.style.display="block",n.style.display="none";else{var r=document.getElementById("Skill-names-info-"+e);for(var o in a.style.display="none",n.style.display="block",r.style.display="block",t)t[o]!==e&&(document.getElementById("Skill-names-info-"+t[o]).style.display="none")}}if(a="Spar"!==e.gameState.curLoc&&"Battle"!==e.gameState.curLoc||"skills"!==e.gameState.playerView?e.gameState.player.skill:e.gameState.SBState.playerSkill,"skills"===e.gameState.playerView)return r.a.createElement("div",null,r.a.createElement("t",{id:"Skill-title-info"},"Skills:"),r.a.createElement("div",{id:"Skill-options-info"},r.a.createElement("button",{onClick:function(){return n("ATK")}},"Attack Skills"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return n("DEF")}},"Defense Skills"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return n("AGI")}},"Agility Skills"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return n("SPE")}},"Special Skills")),r.a.createElement("div",{id:"Skill-names-info",style:{display:"none"}},t.map(function(t){return r.a.createElement("div",{key:t,id:"Skill-names-info-"+t,style:{display:"none"}},a.filter(function(a){return e.gameState.SkillData[a].type===t}).map(function(t){return r.a.createElement("div",{key:t},r.a.createElement("button",{onClick:function(){return e.onDialSkillInfo(t)}},e.gameState.SkillData[t].name))}))}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return n("NONE")}},"Return")))}return"Spar"!==e.gameState.curLoc&&"Battle"!==e.gameState.curLoc?r.a.createElement("div",{id:"Game-playerinfo"},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onSwitchPlayerView("overview")}},"Player"),r.a.createElement("button",{className:"game-button",onClick:function(){return e.onSwitchPlayerView("inventory")}},"Inventory"),r.a.createElement("button",{className:"game-button",onClick:function(){return e.onSwitchPlayerView("skills")}},"Skills"),t(),function(){if("inventory"===e.gameState.playerView)return r.a.createElement("div",null,"Inventory: ",e.gameState.player.inventory,r.a.createElement("br",null),"TODO")}(),a()):r.a.createElement("div",{id:"Game-playerinfo"},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onSwitchPlayerView("overview")}},"Player"),r.a.createElement("button",{className:"game-button",onClick:function(){return e.onSwitchPlayerView("skills")}},"Skills"),t(),a())}function u(e){if(e.gameState.dialCharId){var t=function(){if(n.quest)if(e.gameState.completeQuest.includes(a));else{if(e.gameState.doneQuest.includes(a)&&e.gameState.activeQuest.includes(a)){var t=!1;return r.a.createElement("div",{id:"char-interact"},r.a.createElement("button",{className:"game-button",onClick:function(){t||(e.onCompleteQuest(a),t=!0)}},"Compelte Quest"))}if(e.gameState.activeQuest.includes(a))return r.a.createElement("div",{id:"char-interact"},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onInfoQuest(a)}},"Quest"));if(e.gameState.validQuest.includes(a))return r.a.createElement("div",{id:"char-interact"},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onStartQuest(a)}},"Start Quest"))}},a=e.gameState.dialCharId,n=e.gameState.CharData[a].interact;return r.a.createElement("div",{id:"Game-interactions"},r.a.createElement("t",{id:"underline"},"Character Actions"),r.a.createElement("br",null),e.gameState.CharData[a].talk.map(function(t){return r.a.createElement("div",{key:t.answer},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onDialCharTalk(function(t){return e.gameState.doneChar.includes(a)&&t.done?t.done:t.answer}(t))}},t.question))}),r.a.createElement("div",{id:"Game-interact"},function(){if(n.train)return r.a.createElement("div",{id:"char-interact"},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onTrain(n.train.stat,n.train.multiplier,n.train.time)}},"Train ",n.train.stat.toUpperCase()))}(),function(){if(n.teachSkill&&e.gameState.validSkill.includes(n.teachSkill.skillId)&&!e.gameState.player.skill.includes(n.teachSkill.skillId))return r.a.createElement("div",{id:"char-interact"},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onLearnSkill(n.teachSkill.skillId,n.teachSkill.time)}},"Learn Skill"))}(),t(),function(){if(n.spar)return r.a.createElement("div",{id:"char-interact"},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onStartSB("Spar")}},"Spar"))}(),function(){if(n.battle)return r.a.createElement("div",{id:"char-interact"},r.a.createElement("button",null,"Battle"))}()))}if(e.gameState.dialLocId){var o=e.gameState.dialLocId;return r.a.createElement("div",{id:"Game-interactions"},r.a.createElement("t",{id:"underline"},"Location Actions"),r.a.createElement("br",null),r.a.createElement("button",{className:"game-button",onClick:function(){return e.onSwitchLocation(o)}},"Go to ",e.gameState.LocData[o].name))}return r.a.createElement("div",{id:"Game-interactions"},r.a.createElement("t",{id:"underline"},"Actions"),r.a.createElement("br",null),r.a.createElement("t",null,"Select a location or character to interact with."))}var d=function(e){return e.gameState.curLoc,r.a.createElement("div",null,e.gameState.SBState.endResult?r.a.createElement("div",{id:"Game-nav"},r.a.createElement("button",{onClick:function(){return e.onEndSB()}},"Finish")):r.a.createElement("div",{id:"Game-nav"},r.a.createElement("t",null,"You can not leave while in combat.")),r.a.createElement("div",{id:"Game-characters"},e.gameState.CharData[e.gameState.curChar].name,r.a.createElement("br",null),"HP: ",e.gameState.SBState.oppHp,r.a.createElement("br",null),"Energy: ",e.gameState.SBState.oppEnergy,r.a.createElement("br",null),"Status:",e.gameState.SBState.oppStatus.map(function(e){return r.a.createElement("t",{key:e},r.a.createElement("br",null),e)}),r.a.createElement("br",null),"Passives:",e.gameState.SBState.oppPassive.map(function(t){return r.a.createElement("t",{key:t},r.a.createElement("br",null),e.gameState.SkillData[t].name)})),function(){var t=["ATK","DEF","AGI","SPE"];function a(e){var a=document.getElementById("Skill-options"),n=document.getElementById("Skill-names"),r=document.getElementById("Skill-press");if("NONE"===e)a.style.display="block",n.style.display="none",r.style.display="none";else{var o=document.getElementById("Skill-names-"+e),i=document.getElementById("Skill-press-"+e);for(var l in a.style.display="none",n.style.display="block",o.style.display="block",r.style.display="block",i.style.display="block",t)t[l]!==e&&(document.getElementById("Skill-names-"+t[l]).style.display="none",document.getElementById("Skill-press-"+t[l]).style.display="none")}}return console.log(e.gameState.SBState.playerSkill),r.a.createElement("div",{id:"Game-interactions"},r.a.createElement("t",{id:"Skill-title"},"Skills:"),r.a.createElement("div",{id:"Skill-options"},r.a.createElement("button",{onClick:function(){return a("ATK")}},"Attack Skills"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return a("DEF")}},"Defense Skills"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return a("AGI")}},"Agility Skills"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return a("SPE")}},"Special Skills")),r.a.createElement("div",{id:"Skill-names",style:{display:"none"}},t.map(function(t){return r.a.createElement("div",{key:t,id:"Skill-names-"+t,style:{display:"none"}},e.gameState.SBState.playerSkill.filter(function(a){return e.gameState.SkillData[a].type===t}).map(function(t){return r.a.createElement("t",{key:t},e.gameState.SkillData[t].name,r.a.createElement("br",null))}))}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return a("NONE")}},"Return")),r.a.createElement("div",{id:"Skill-press",style:{display:"none"}},t.map(function(t){return r.a.createElement("div",{key:t,id:"Skill-press-"+t,style:{display:"none"}},e.gameState.SBState.playerSkill.filter(function(a){return e.gameState.SkillData[a].type===t}).map(function(t){return r.a.createElement("button",{key:t,onClick:function(){return e.onProcessSBMove(t)}},"USE")}))})))}())};var S=function(e){return"Spar"===e.gameState.curLoc||"Battle"===e.gameState.curLoc?r.a.createElement("div",{id:"Game-screen"},r.a.createElement("div",{id:"Game-time>"}," Time: ",e.gameState.time," "),r.a.createElement("div",{id:"Game-main"},d(Object(s.a)({},e))),r.a.createElement("div",{id:"Game-player"},c(Object(s.a)({},e))),r.a.createElement("div",{id:"Game-dialog"},"System: ",e.gameState.dialSysText,r.a.createElement("br",null),"Dialog: ",e.gameState.dialCharText)):r.a.createElement("div",{id:"Game-screen"},r.a.createElement("div",{id:"Game-time>"}," Time: ",e.gameState.time," "),r.a.createElement("div",{id:"Game-main"},function(e){var t=e.gameState.curLoc,a=e.gameState.LocData[t].children.filter(function(t){return e.gameState.validLoc.includes(t)}),n=e.gameState.LocData[t].parent,o="Back";if(n?o=e.gameState.LocData[n].name:n=e.gameState.prevLoc,"Spar"!==t&&"Battle"!==t)return r.a.createElement("div",{id:"Game-nav"},r.a.createElement("div",{id:"Game-children"},r.a.createElement("t",{id:"underline"},"Places"),a.map(function(t){return r.a.createElement("div",{key:t},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onDialLocAbout(t)}},e.gameState.LocData[t].name),r.a.createElement("br",null))})),"Back"===o?r.a.createElement("div",{id:"Game-parent"},r.a.createElement("br",null),r.a.createElement("t",{id:"underline"},"Previous Location"),r.a.createElement("br",null),r.a.createElement("button",{className:"game-button",onClick:function(){return e.onDialLocAbout(n)}},o)):r.a.createElement("div",{id:"Game-parent"},r.a.createElement("br",null),r.a.createElement("t",{id:"underline"},"Exit Location"),r.a.createElement("br",null),r.a.createElement("button",{className:"game-button",onClick:function(){return e.onDialLocAbout(n)}},o)))}(Object(s.a)({},e)),function(e){var t=e.gameState.curLoc,a=e.gameState.LocData[t].characters;return a=a.filter(function(t){return e.gameState.validChar.includes(t)}),Array.isArray(a)&&a.length?r.a.createElement("div",{id:"Game-characters"},r.a.createElement("t",{id:"underline"},"Characters"),a.map(function(t){return r.a.createElement("div",{key:t},r.a.createElement("button",{className:"game-button",onClick:function(){return e.onDialCharAbout(t)}},e.gameState.CharData[t].name))})):r.a.createElement("div",{id:"Game-characters"},r.a.createElement("t",{id:"underline"},"Characters"),r.a.createElement("br",null),"There are no characters to interact with.")}(Object(s.a)({},e)),u(Object(s.a)({},e))),r.a.createElement("div",{id:"Game-player"},c(Object(s.a)({},e))),r.a.createElement("div",{id:"Game-dialog"},"System: ",e.gameState.dialSysText,r.a.createElement("br",null),"Dialog: ",e.gameState.dialCharText))};function m(e){return"Game"===e.screenState.screen?r.a.createElement("div",{id:"App-header"},r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("Home")}},"Home")," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-header"},e.gameState.LocData[e.gameState.curLoc].name)," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("Help")}},"Help")):"Help"===e.screenState.screen?r.a.createElement("div",{id:"App-header"},r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("Home")}},"Home")," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("Report")}},"Report")," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("Game")}},"Resume")):r.a.createElement("div",{id:"App-header"},r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("Home")}},"Home")," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("About")}},"About")," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-header",onClick:function(){return e.onSwitchScreen("Help")}},"Help"))}function p(e){switch(e.screenState.screen){case"Home":return function(e){return r.a.createElement("div",{id:"Main-home"},r.a.createElement("h1",{id:"Home-title"},"Rifeel"),r.a.createElement("h2",null,"The Life of a Fighter"),r.a.createElement("button",{id:"button-text",onClick:function(){return e.onSwitchScreen("Game")}},"Begin Game")," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-text",onClick:function(){return e.onSwitchScreen("Game")}},"Resume Game")," ",r.a.createElement("t",null),r.a.createElement("button",{id:"button-text",onClick:function(){return e.onSwitchScreen("Load")}},"Load Game"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{id:"nameForm"},r.a.createElement("input",{type:"text",name:"fname"})),r.a.createElement("button",{id:"button-text",onClick:function(){return function(){var t=document.getElementById("nameForm").elements[0].value;e.onChangeName(t)}()}},"Change Name"),r.a.createElement("p",null,"Your name: ",e.screenState.name))}(Object(s.a)({},e));case"About":return Object(s.a)({},e),r.a.createElement("div",{id:"Main-about"},"A javascript game written with the help of Flux and React.",r.a.createElement("br",null),"Currently, save states are stored in the browser local storage, so clearing it will erase game data.",r.a.createElement("br",null),"Written by Zhonghao Zhou",r.a.createElement("br",null),"Contact: zhongz132@gmail.com",r.a.createElement("br",null),"Code location (SPOILS GAME): https://github.com/zhongz132/Rifeel-LOaF");case"Load":return Object(s.a)({},e),r.a.createElement("div",{id:"Main-home"},r.a.createElement("p",null,"Load Screen"),r.a.createElement("p",null,"Feature working"));case"Help":return Object(s.a)({},e),r.a.createElement("div",{id:"Main-home"},r.a.createElement("p",null,"Help Screen"),r.a.createElement("p",null,"Feature working"));case"Report":return h(Object(s.a)({},e),"");case"Game":return S(Object(s.a)({},e));default:return h(Object(s.a)({},e),"Invalid screen: "+e.screenState.screen+". Please report!")}}function h(e,t){var a="Bugs: https://github.com/zhongz132/Rifeel-LOaF/issues",n='Other: Email zhongz132@gmail.com with subject: "Rifeel-LOaF: {issue}"';return t.length>0?r.a.createElement("div",{id:"Main-home"},r.a.createElement("p",null," Bug: ",t," "),r.a.createElement("p",null," ",a," "),r.a.createElement("p",null," ",n," ")):r.a.createElement("div",{id:"Main-home"},r.a.createElement("p",null," ",a," "),r.a.createElement("p",null," ",n," "))}var g=function(e){return r.a.createElement("div",null,r.a.createElement(m,e),r.a.createElement(p,e))},f="SWITCH_SCREEN",y="CHANGE_NAME",E="CHANGE_GAMEID",A={SWITCH_LOCATION:"SWITCH_LOCATION",DIAL_LOC_ABOUT:"DIAL_LOC_ABOUT",DIAL_CHAR_ABOUT:"DIAL_CHAR_ABOUT",DIAL_CHAR_TALK:"DIAL_CHAR_TALK",DIAL_SKILL_INFO:"DIAL_SKILL_INFO",SWITCH_PLAYER_VIEW:"SWITCH_PLAYER_VIEW",CHAR_INTERACT_TRAIN:"CHAR_INTERACT_TRAIN",CHAR_INTERACT_LEARN:"CHAR_INTERACT_LEARN",CHAR_INTERACT_START_QUEST:"CHAR_INTERACT_START_QUEST",CHAR_INTERACT_INFO_QUEST:"CHAR_INTERACT_INFO_QUEST",CHAR_INTERACT_COMPLETE_QUEST:"CHAR_INTERACT_COMPLETE_QUEST",CHAR_INTERACT_SB:"CHAR_INTERACT_SB",CHAR_INTREACT_END_SB:"CHAR_INTREACT_END_SB",SB_PROCESS_MOVE:"SB_PROCESS_MOVE",PLAY_CHANGE_GOLD:"PLAY_CHANGE_GOLD",PLAY_ADD_INVENTORY:"PLAY_ADD_INVENTORY",PLAY_DEL_INVENTORY:"PLAY_DEL_INVENTORY"},b=new(a(90).Dispatcher),I={switchScreen:function(e){b.dispatch({type:f,text:e})},changeName:function(e){b.dispatch({type:y,text:e})},changeGameId:function(e){b.dispatch({type:E,gameId:e})}},T={switchLocation:function(e){b.dispatch({type:A.SWITCH_LOCATION,locId:e})},dialLocAbout:function(e){b.dispatch({type:A.DIAL_LOC_ABOUT,locId:e})},dialCharAbout:function(e){b.dispatch({type:A.DIAL_CHAR_ABOUT,charId:e})},dialCharTalk:function(e){b.dispatch({type:A.DIAL_CHAR_TALK,dialCharText:e})},dialSkillInfo:function(e){b.dispatch({type:A.DIAL_SKILL_INFO,skillId:e})},switchPlayerView:function(e){b.dispatch({type:A.SWITCH_PLAYER_VIEW,playerView:e})},train:function(e,t,a){b.dispatch({type:A.CHAR_INTERACT_TRAIN,stat:e,multiplier:t,time:a})},learnSkill:function(e,t){b.dispatch({type:A.CHAR_INTERACT_LEARN,skillId:e,time:t})},startQuest:function(e){b.dispatch({type:A.CHAR_INTERACT_START_QUEST,charId:e})},infoQuest:function(e){b.dispatch({type:A.CHAR_INTERACT_INFO_QUEST,charId:e})},completeQuest:function(e){b.dispatch({type:A.CHAR_INTERACT_COMPLETE_QUEST,charId:e})},startSB:function(e){b.dispatch({type:A.CHAR_INTERACT_SB,sbType:e})},endSB:function(){b.dispatch({type:A.CHAR_INTERACT_END_SB})},processSBMove:function(e){b.dispatch({type:A.SB_PROCESS_MOVE,skillId:e})}},k=a(34),_=a(35),v=a(37),C=a(36),R=a(38),w=new(function(e){function t(){return Object(k.a)(this,t),Object(v.a)(this,Object(C.a)(t).call(this,b))}return Object(R.a)(t,e),Object(_.a)(t,[{key:"getInitialState",value:function(){return{name:"Alice",userId:"",screen:"Home",gameVersion:"Rifeel-LOaF-0.01",gameId:0}}},{key:"reduce",value:function(e,t){switch(t.type){case f:return Object(s.a)({},e,{screen:t.text});case y:return Object(s.a)({},e,{name:t.text});case E:return Object(s.a)({},e,{gameId:t.gameId});default:return e}}}]),t}(l.ReduceStore)),L=a(2),D=a(8),P=a.n(D),N=P.a.Record({locId:"",order:999999,time:1,parent:"",children:[],characters:[],name:"",about:"",validReq:[],hint:""}),B=[],O={getId:function(e){return e.length>0?e.reduce(function(e,t){return e+"_"+t}):(console.log("Error: Tried to get the locId of empty path in genLocId.getId"),null)},genId:function(e){var t=this.getId(e);return B.includes(t)?(console.log("Critical Error: Repeating key: "+t),null):"_"!==t[t.length-1]?(B.push(t),t):void console.log("Error: Locations can not have no key.")},_getAndCheckParentId:function(e){if(e.pop(),0===e.length)return"";var t=this.getId(e);return B.includes(t)?t:(console.log("Critical Error: No parent key: "+t),null)},getParentId:function(e){if(null===e)return console.log("Critical Error: Tried to get the parent of a null object in genLocId.getParentId."),null;if("object"===typeof e&&e.length>0){if(!B.includes(this.getId(e)))return console.log("Error: Invalid location path: "+e+" given in genLocId.getParentId"),null;var t=e;return this._getAndCheckParentId(t)}if(e&&"string"===typeof e){if(!B.includes(e))return console.log("Error: Invalid locId: "+e+" given in genLocId.getParentId"),null;var a=e.split("_");return this._getAndCheckParentId(a)}return"object"!==typeof e&&"string"!==typeof e?(console.log("Error: Using genLocId.getParentId input type unrecognized"),null):null},_getChildrenHelper:function(e){var t=e.length+1;return e?B.length>0&&t>=0?B.filter(function(a){return a.startsWith(e+"_")&&!a.slice(t).includes("_")}):void 0:B.filter(function(e){return!e.includes("_")})},getChildrenId:function(e){if(null===e)return console.log("Critical Error: Tried to get the children of a null object in genLocId.getChildrenId."),null;if("string"===typeof e)return!B.includes(e)&&e?(console.log("Invalid locId: "+e+" given in genLocId.getChildrenId"),null):this._getChildrenHelper(e);if("object"===typeof e){var t=this.getId(e);return t&&!B.includes(t)?(console.log("Invalid location path: "+e+" given in genLocId.getChildrenId"),null):null===t?(console.log("Critical Error: Tried to get the children of a null object in genLocId.getChildrenId through path."),null):this._getChildrenHelper(t)}}},G={};for(var H in G[O.genId(["World"])]=new N({order:0,time:10,name:"Map",about:"The map of the Frajen island."}),G[O.genId(["Spar"])]=new N({order:1,time:5,name:"Spar",about:"Practice against your opponent."}),G[O.genId(["Battle"])]=new N({order:2,time:10,name:"Battle",about:"Fight your opponent to the death."}),G)G[H]=G[H].set("locId",H);var x=G,F={};F[O.genId(["World","Lian"])]=new N({order:10,time:0,name:"Lian",about:"A town bordering the ocean to the north. Currently under the jurisdiction of the Tareinan empire."}),F[O.genId(["World","ForestLian"])]=new N({order:16,time:0,name:"Woods",about:"The woods just east of Lian."}),F[O.genId(["World","Road"])]=new N({order:18,time:0,name:"Road",about:"The grand road connecting the cities and towns of the Tareinan empire."}),F[O.genId(["World","Marpen"])]=new N({order:20,time:0,name:"Marpen",about:"The Tareinan city south-east of Lian, which connects to the capital, Tarein."}),F[O.genId(["World","Tarein"])]=new N({order:30,time:0,name:"Tarein",about:"The capital city in the center of Frajen, Tarein."}),F[O.genId(["World","Pativeel"])]=new N({order:61,time:0,name:"Pativeel",about:"An independent city south-west of Tarein, which borders the Kimal Forest"}),F[O.genId(["World","ForestTarein"])]=new N({order:51,time:0,name:"Kimal Forest",about:"The massive forest which occupies the entire southern portion of Frajen."}),F[O.genId(["World","Ending"])]=new N({order:200,time:0,name:"???",about:"Where are you?"});var q=F,W={};W[O.genId(["World","Lian","Home"])]=new N({order:10,name:"Home",about:"Home sweet home.",characters:["World_Lian_Home_Mom","World_Lian_Home_Dad"]}),W[O.genId(["World","Lian","Dojo"])]=new N({order:11,name:"Dojo",about:"A dojo in the town of Lian.",characters:["World_Lian_Dojo_StudentAtk","World_Lian_Dojo_StudentDef","World_Lian_Dojo_StudentAgi","World_Lian_Dojo_Teacher"]}),W[O.genId(["World","Lian","School"])]=new N({order:12,name:"School",about:"A school in the town of Lian.",characters:["World_Lian_School_StudentInf","World_Lian_School_StudentInt","World_Lian_School_Teacher"]}),W[O.genId(["World","Lian","Hall"])]=new N({order:13,name:"Town Hall",about:"The town hall of Lian.",characters:["World_Lian_Hall_Messenger","World_Lian_Hall_Guard","World_Lian_Hall_Sheriff","World_Lian_Hall_Chief"]}),W[O.genId(["World","Lian","Shop"])]=new N({order:14,name:"Shop",about:"A shop in the town of Lian.",characters:["World_Lian_Shop_Customer","World_Lian_Shop_Storekeeper"]}),W[O.genId(["World","Lian","Center"])]=new N({order:15,name:"Town Center",about:"The town center of Lian.",characters:["World_Lian_Center_CrazyOldMan"]});var Y=W,U={};U[O.genId(["World","Tarein","Dojo"])]=new N({order:31,name:"Dojo",about:"A dojo in Tarein."}),U[O.genId(["World","Tarein","Barracks"])]=new N({order:32,validReq:[{loc:["Lian_scene_str1"]},{loc:["Lian_scene_str2"]},{str:220}],name:"Barracks",about:"The barracks in Tarein.",hint:"Increase strength or influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","Camp"])]=new N({order:33,name:"Army Camp",about:"The base army camp in Tarein.",hint:"Increase strength or influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","Assasin"])]=new N({order:34,name:"Assasin's Guild",about:"The assasin's guild in Tarein. Hire assasins, take missions, or train skills."}),U[O.genId(["World","Tarein","School"])]=new N({order:35,name:"School",about:"A school in Tarein."}),U[O.genId(["World","Tarein","Uni"])]=new N({order:36,validReq:[{loc:["Lian_scene_int1"]},{loc:["Lian_scene_int2"]},{int:220}],name:"University",about:"The university in Tarein.",hint:"Increase intelligence or influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","Hospital"])]=new N({order:37,name:"Hospital",about:"The hospital in Tarein. Learn to heal and the basics of human anatomy.",hint:"Increase intelligence or influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","Lab"])]=new N({order:38,name:"Lab",about:"The underground lab in Tarein. Delves in miltary science, human experimentation, and others."}),U[O.genId(["World","Tarein","Hall"])]=new N({order:39,name:"City Hall",about:"The city hall of Tarein."}),U[O.genId(["World","Tarein","Court"])]=new N({order:40,validReq:[{loc:["Lian_scene_cha1"]},{loc:["Lian_scene_cha2"]},{cha:220}],name:"Courthouse",about:"The courhouse in Tarein",hint:"Increase charisma or influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","Palace"])]=new N({order:41,name:"Palace",validReq:null,about:"The palace of Ysvan Tarein, the lord of Tarein.",hint:"Increase charsima or influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","Society"])]=new N({order:42,validReq:null,name:"Secret Society",about:"The underground secret society of Tarein."}),U[O.genId(["World","Tarein","Shop"])]=new N({order:43,name:"Shop",about:"A shop in Tarein"}),U[O.genId(["World","Tarein","Auction"])]=new N({order:44,name:"Auction House",validReq:[{loc:["Lian_scene_gold2"]},{gold:1e3}],about:"The auction house in Tarein.",hint:"Pay or increase influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","Merchant"])]=new N({order:45,name:"Merchant Guild",about:"The merchants guild in Tarein.",hint:"Pay or increase influence to unlock. Can also unlock through scenarios."}),U[O.genId(["World","Tarein","BlackMarket"])]=new N({order:46,name:"Black Market",about:"The black market in Tarein."}),U[O.genId(["World","Tarein","Center"])]=new N({order:50,name:"City Center",about:"The city center of Tarein."}),U[O.genId(["World","Tarein","scene-str0"])]=new N({order:201,validReq:[{curMonth:1,loc:["World_Tarein"]}],name:"Fighting Competition",about:"The city is hosting its annual fighting competition.",hint:"Begins the first month of the year"}),U[O.genId(["World","Tarein","scene-int0"])]=new N({order:202,validReq:[{curMonth:5,loc:["World_Tarein"]}],name:"Research Conference",about:"The city is hosting its annual research conference.",hint:"Begins the fifth month of the year"}),U[O.genId(["World","Tarein","scene-cha0"])]=new N({order:203,validReq:[{curMonth:10,loc:["World_Tarein"]}],name:"Political Debate",about:"The city is hosting its annual political debate.",hint:"Begins the tenth month of the year"});var j=U;function K(e){for(var t in e)e[t]=e[t].set("children",O.getChildrenId(t)).set("locId",t).set("parent",O.getParentId(t))}K(x),K(q),K(Y),K(j);var M=P.a.Record(Object(s.a)({},x,q,Y,j)),Q=P.a.Record({charId:"",name:"BaseChar",about:"BaseAbout",talk:[],interact:{},cst:100,atk:100,def:100,agi:100,int:100,passive:[],skill:[],logic:"",inf:0,validReq:[],doneReq:[]}),V={PAS_FATED:"PAS_FATED",PAS_UNDYING:"PAS_UNDYING",PAS_WOLF:"PAS_WOLF",PAS_BEAR:"PAS_BEAR",PAS_DRAGON:"PAS_DRAGON",PAS_SPEARMAN:"PAS_SPEARMAN",PAS_WARRIOR:"PAS_WARRIOR",PAS_BERSERKER:"PAS_BERSERKER",PAS_INFANTRY:"PAS_INFANTRY",PAS_SOLDIER:"PAS_SOLDIER",PAS_KNIGHT:"PAS_KNIGHT",PAS_THIEF:"PAS_THIEF",PAS_ROGUE:"PAS_ROGUE",PAS_ASSASSAIN:"PAS_ASSASSAIN",PAS_MESSENGER:"PAS_MESSENGER",PAS_ANALYST:"PAS_ANALYST",PAS_TACTICIAN:"PAS_TACTICIAN",ATK_BASIC:"ATK_BASIC",ATK_DSTAB:"ATK_DSTAB",ATK_SMASH:"ATK_SMASH",ATK_CHARGE:"ATK_CHARGE",ATK_FINALBREATH:"ATK_FINALBREATH",DEF_BASIC:"DEF_BASIC",DEF_PARRY:"DEF_PARRY",DEF_BLOCK:"DEF_BLOCK",DEF_DODGE:"DEF_DODGE",DEF_COUNTER:"DEF_COUNTER",AGI_BASIC:"AGI_BASIC",AGI_BACKSTAB:"AGI_BACKSTAB",AGI_QUICKSTRIKE:"AGI_QUICKSTRIKE",AGI_EVISCERATE:"AGI_EVISCERATE",AGI_ASSASSINATE:"AGI_ASSASSINATE",SPE_ESCAPE:"SPE_ESCAPE",SPE_WAIT:"SPE_WAIT",SPE_CHARGEUP:"SPE_CHARGEUP",SPE_EXAMINE:"SPE_EXAMINE",SPE_BERSERK:"SPE_BERSERK",SPE_BANDAGE:"SPE_BANDAGE",SPE_HEAL:"SPE_HEAL",STUNNED:"STUNNED",BASIC:["ATK_BASIC","DEF_BASIC","AGI_BASIC","SPE_ESCAPE"]};V.WARRIOR=V.BASIC.concat(["ATK_DSTAB","ATK_SMASH","SPE_CHARGEUP"]),V.SOLDIER=V.BASIC.concat(["DEF_PARRY","DEF_BLOCK","SPE_BANDAGE"]),V.ROGUE=V.BASIC.concat(["AGI_BACKSTAB","AGI_QUICKSTRIKE","SPE_WAIT"]),V.ALL_INT=V.BASIC.concat(["ATK_DSTAB","ATK_SMASH","DEF_PARRY","DEF_BLOCK","AGI_BACKSTAB","AGI_QUICKSTRIKE","SPE_CHARGEUP","SPE_BANDAGE","SPE_WAIT"]),V.BERSERKER=V.WARRIOR.concat(["ATK_CHARGE","ATK_FINALBREATH","SPE_BERSERK"]),V.KNIGHT=V.SOLDIER.concat(["DEF_DODGE","DEF_COUNTER","SPE_HEAL"]),V.ASSASSAIN=V.ROGUE.concat(["AGI_EVISCERATE","AGI_ASSASSINATE","SPE_EXAMINE"]),V.ALL_ADV=V.ALL_INT.concat(["ATK_CHARGE","ATK_FINALBREATH","DEF_DODGE","DEF_COUNTER","AGI_EVISCERATE","AGI_ASSASSINATE","SPE_BERSERK","SPE_HEAL","SPE_EXAMINE"]);var z=V,J={BASIC:"BASIC",INTERMEDIATE:"INTERMEDIATE",ADVANCED:"ADVANCED",PREDICT:"PREDICT",WARRIOR:"WARRIOR",BERSERKER:"BERSERKER",SOLDIER:"SOLDIER",KNIGHT:"KNIGHT",ROGUE:"ROGUE",ASSASSAIN:"ASSASSAIN"},X="World_Lian_",Z=X+"Home_",$=X+"Dojo_",ee=X+"School_",te=X+"Hall_",ae=X+"Shop_",ne={};ne[Z+"Mom"]=new Q({name:"Mom",about:"Teaches at the local elementary school. Gives new meaning to the phrase 'Unconditional love'.",agi:115,int:450,inf:250,talk:[{question:"Who are you?",answer:"Oh dear, it seems you've gone blind. You can't even recognize your own mother."},{question:"Do you need help?",answer:"That's kind of you dear, but just focus on studying and training, and stay safe."},{question:"Can you tell me a story?",answer:"A long time ago, "}]}),ne[Z+"Dad"]=new Q({name:"Dad",about:"Used to be a warrior. Jolly and kind, but his mood seems to sour in the 10th month.",cst:350,atk:425,def:250,agi:325,int:250,inf:550,passive:[z.PAS_BEAR,z.PAS_WARRIOR,z.PAS_ROGUE,z.PAS_TACTICIAN],skill:[z.WARRIOR,z.ROGUE],logic:J.WARRIOR,talk:[{question:"Who are you?",answer:"Get back to work before I knock you on your head again."},{question:"Do you need help?",answer:"Haha, when you're stronger.",done:"You've done all I ever wanted."},{question:"Can you tell me a story?",answer:"I "}],interact:{spar:{cost:4,reward:{inf:15,cst:10,atk:20,def:5,agi:10}},quest:{about:"Years ago I wounded a beast called Yeoron. He eventually healed,\nand when I was fighting elsewhere, slew my brothers. I was injured trying to avenge them.\nKill Yeoron for me. He should be in the forest just outside of Tarein.",validReq:[{spar:[Z+"Dad"]}],doneReq:[{dead:["World_ForestTarein_Yeoron"]}],reward:{inf:150,rep:25,item:"Cagnil"}}},doneReq:[{quest:[Z+"Dad"]}]}),ne[$+"StudentAtk"]=new Q({name:"Sword Student",about:"A student who specializes in attack studying under Gordon.",cst:105,atk:125,int:90,passive:[z.PAS_SPEARMAN],skill:[z.BASIC,z.ATK_DSTAB],logic:J.BASIC,talk:[{question:"What are you doing?",answer:"Learning the way of the spear, the strongest offense."},{question:"What's attack good for?",answer:"Damage! Your attacks hurt more and might break through defense!"}],interact:{spar:{time:2,reward:{inf:2,atk:10}},train:{stat:"atk",multiplier:1,time:10}},doneReq:[{spar:[$+"StudentAtk"]}]}),ne[$+"StudentDef"]=new Q({name:"Shield Student",about:"A student who specializes in defense studying under Gordon.",cst:120,def:125,agi:90,int:90,passive:[z.PAS_INFANTRY],skill:[z.BASIC,z.DEF_PARRY],logic:J.BASIC,talk:[{question:"What are you doing?",answer:"Learning the way of the sword and shield, the strongest defense."},{question:"What's defense good against?",answer:"You take less damage and block fast, sneaky attacks better!"}],interact:{spar:{time:2,reward:{inf:2,def:10}},train:{stat:"def",multiplier:1,time:10}},doneReq:[{spar:[$+"StudentDef"]}]}),ne[$+"StudentAgi"]=new Q({name:"Dagger Student",about:"A student who specializes in agility studying under Gordon.",atk:105,def:80,agi:125,passive:[z.PAS_THIEF],skill:[z.BASIC,z.AGI_BACKSTAB],logic:J.BASIC,talk:[{question:"What are you doing?",answer:"Learning the way of the dagger, the quickest offense."},{question:"What's agility good for?",answer:"You can choose when to attack, and attack fast before someone can hit you back!"}],interact:{spar:{time:2,reward:{inf:2,agi:10}},train:{stat:"agi",multiplier:1,time:10}},doneReq:[{spar:[$+"StudentAgi"]}]}),ne[$+"Teacher"]=new Q({name:"Gordon",about:"A kind, old retired soldier from Tarein. The head instructor of the dojo.",cst:180,atk:175,def:250,agi:165,int:150,inf:80,passive:[z.PAS_SPEARMAN,z.PAS_SOLDIER],skill:[z.SOLDIER,z.ATK_DSTAB,z.AGI_BACKSTAB],logic:J.SOLDIER,talk:[{question:"What are you doing?",answer:"Training my body. Only when your body is strong, can you take more hits in combat."},{question:"Can you teach me how to parry an attack",answer:"Increase your defense first.",done:"I've already taught you."}],interact:{spar:{time:3,reward:{inf:10,cst:20,passive:z.PAS_INFANTRY}},train:{stat:"cst",multiplier:1,time:10},teachSkill:{skillId:z.DEF_PARRY,validReq:[{def:130}],time:25},quest:{about:"Go and beat my students.",validReq:[{atk:100,def:100,agi:100}],doneReq:[{spar:[$+"StudentAtk",$+"StudentDef",$+"StudentAgi"]}],reward:{inf:1,atk:10,def:10,skill:z.ATK_DSTAB},doneText:"Use your new skill wisely. Go see Giqral in school to learn some agility skills."}},doneReq:[{skill:[z.DEF_PARRY]}]}),ne[ee+"StudentInf"]=new Q({name:"Political Student",about:"A student who is studying politics under Giqral.",int:125,talk:[{question:"How can I increase my influence?",answer:"Help other people! Defeat others in combat."},{question:"Can you introduce me to the town chief?",answer:"When your influence is higher.",done:"I already have!"}],interact:{quest:{about:"Convince Giqral to give you a copy of the book 'The History of Tarein'. ",validReq:[{}],doneReq:[{item:["Book_History_Tarein"]}],reward:{inf:5,int:10},take:{item:["Book_History_Tarein"]},doneText:"Okay, I'll introduce you to Toraq. You can find him in the town hall."}},doneReq:[{quest:[ee+"StudentInf"]}]}),ne[ee+"StudentInt"]=new Q({name:"Tactics Student",about:"A student who is studying combat tactics under Giqral.",cst:110,atk:110,def:110,agi:115,int:135,talk:[{question:"What are you doing?",answer:"Studying battlefield tactics."},{question:"How do I defeat my opponents?",answer:"There are a lot of ways, but you should always observe them."},{question:"Can you teach me how?",answer:"Maybe when your intelligence is higher.",done:"I already taught you all I know."}],interact:{train:{stat:"int",multiplier:1,time:10},teachSkill:{skillId:z.SPE_WAIT,validReq:[{int:120}],time:10}},doneReq:[{skill:[z.SPE_WAIT]}]}),ne[ee+"Teacher"]=new Q({name:"Giqral",about:"An old rogue. Old friends with Gordon. The head teacher of the school.",cst:120,atk:170,agi:250,def:150,int:250,inf:100,talk:[{question:"Why do they call you a rogue",answer:"Wouldn't you like to know?"},{question:"Can you teach me how to use the dagger?",answer:"Sure, if you beat Gordon afterwards.",done:"Hehehehee, that was great."},{question:"Do you need help?",answer:"The old man Gordon is annoying. Go defeat him in a spar for me and I'll give you this old book.",done:"Haha, not anymore. It was great seeing Gordon's face when he lost."}],interact:{teachSkill:{skillId:z.AGI_BACKSTAB,validReq:[{}],time:25},quest:{about:"Go and beat Gordon in a spar.",validReq:[{}],doneReq:[{spar:[$+"Teacher"]}],reward:{inf:10,agi:10,item:"Book_History_Tarein"},doneText:"Hehe, that was fun."}},validReq:[{quest:[$+"Teacher"]}],doneReq:[{quest:[ee+"Teacher"]}]}),ne[te+"Messenger"]=new Q({name:"Messenger",about:"The local messenger.",cst:140,agi:120,int:150,inf:30}),ne[te+"Guard"]=new Q({name:"Guard",about:"A skilled infantryman who served under the town sheriff. The town guard.",cst:200,atk:150,def:210,agi:150,int:125,inf:90,passive:[z.PAS_WOLF,z.PAS_INFANTRY],skill:[z.BASIC,z.ATK_DSTAB,z.DEF_PARRY],logic:J.BASIC,talk:[{question:"Hi",answer:"Blah"}],interact:{spar:{time:2,reward:{inf:10,def:20}}},doneReq:[{spar:[te+"Guard"]}]}),ne[te+"Sheriff"]=new Q({name:"Sheriff",about:"A soldier who served under the town chief, Toraq. The town sheriff.",cst:400,atk:250,def:400,agi:225,int:225,inf:300,passive:[z.PAS_WOLF,z.PAS_SOLDIER,z.PAS_MESSENGER],skill:[z.SOLDIER],logic:J.SOLDIER,talk:[{question:"Hi",answer:"Hi"}],interact:{train:{stat:"def",multiplier:1.1,time:11},spar:{time:4,reward:{inf:20,def:30}}},validReq:[{char:[te+"Guard"]}],doneReq:[{spar:[te+"Sheriff"],quest:[te+"Sheriff"]}]}),ne[te+"Chief"]=new Q({name:"Toraq",about:"A retired knight. The chief of the town.",cst:950,atk:750,def:950,agi:550,int:500,inf:1500,passive:[z.PAS_BEAR,z.PAS_WARRIOR,z.PAS_KNIGHT],skill:[z.KNIGHT],logic:J.KNIGHT,talk:[{question:"Hi",answer:"Hi"}],interact:{spar:{time:5,reward:{inf:40,cst:40,def:40}},quest:{about:"Promote the fame of Lian through yourself.",validReq:[{inf:200}],doneReq:[{inf:1e3}],reward:{inf:10,rep:2,int:10,item:"Letter_Boris"},doneText:"Thank you. Take this letter to Boris in Tarein and he'll help you learn a new skill."}},validReq:[{char:[ee+"StudentInf"]}],doneReq:[{spar:[te+"Chief"],quest:[te+"Chief"]}]}),ne[ae+"Customer"]=new Q({name:"Customer",about:"It looks like he really wants something on the shelf."}),ne[ae+"Storekeeper"]=new Q({name:"Storekeeper",about:"A retired merchant. Spends the remainder of his days tending his store."}),ne.World_Lian_Center_CrazyOldMan=new Q({name:"Crazy Old Man",about:"An insane old man.",cst:10,def:20,agi:10,int:0,talk:[{question:"Hi?",answer:"They're coming, they're coming."},{question:"What's coming?",answer:"It's red, red, red, red.",done:"The eyes, they're red. Red. Red. RED."}],doneReq:[{int:1200}]});var re=ne,oe=P.a.Record(Object(s.a)({},re)),ie=P.a.Record({name:"",about:"",type:"",level:0,bonus:{}}),le={};le[z.PAS_FATED]=new ie({name:"Fated",about:"You have been declared a fated one.",type:"SPE"}),le[z.PAS_UNDYING]=new ie({name:"Undying",about:"You are undying.",type:"SPE"}),le[z.PAS_WOLF]=new ie({name:"Wolf",about:"Bark? Awoooo!",type:"CST",level:0,bonus:{cst:.05,energy:5}}),le[z.PAS_BEAR]=new ie({name:"Bear",about:"Bearlike.",type:"CST",level:1,bonus:{cst:.1,def:.05,energy:5}}),le[z.PAS_DRAGON]=new ie({name:"Dragon",about:"Dragon's blood flows through your veins.",type:"CST",level:2,bonus:{cst:.2,def:.1,atk:.05,energy:10}}),le[z.PAS_SPEARMAN]=new ie({name:"Spearman",about:"A starting spearman.",type:"ATK",level:0,bonus:{atk:.05,energy:5}}),le[z.PAS_WARRIOR]=new ie({name:"Warrior",about:"A great warrior.",type:"ATK",level:1,bonus:{atk:.1,agi:.05,energy:5}}),le[z.PAS_BERSERKER]=new ie({name:"Berserker",about:"RRAAAGGGHHHH",type:"ATK",level:2,bonus:{atk:.2,agi:.1,def:.05,energy:10}}),le[z.PAS_INFANTRY]=new ie({name:"Infantry",about:"Attention!",type:"DEF",level:0,bonus:{def:.05,cst:.025}}),le[z.PAS_SOLDIER]=new ie({name:"Soldier",about:"A loyal, unwavering soldier.",type:"DEF",level:1,bonus:{def:.1,cst:.05,atk:.025}}),le[z.PAS_KNIGHT]=new ie({name:"Knight",about:"Oh, glorious knight.",type:"DEF",level:2,bonus:{def:.2,cst:.1,atk:.1,agi:.05}}),le[z.PAS_THIEF]=new ie({name:"Thief",about:"A theif and nothing more.",type:"AGI",level:0,bonus:{agi:.05,int:.025}}),le[z.PAS_ROGUE]=new ie({name:"Rogue",about:"Better, but still a rogue.",type:"AGI",level:1,bonus:{agi:.1,int:.05,atk:.025}}),le[z.PAS_ASSASSAIN]=new ie({name:"Assassain",about:"Nobels tremble at your name.",type:"AGI",level:2,bonus:{agi:.2,int:.1,atk:.1,energy:5}}),le[z.PAS_MESSENGER]=new ie({name:"Messenger",about:"Quickly now.",type:"INT",level:0,bonus:{int:.05,energy:5}}),le[z.PAS_ANALYST]=new ie({name:"ANALYST",about:"I wonder...",type:"INT",level:1,bonus:{int:.1,energy:5}}),le[z.PAS_TACTICIAN]=new ie({name:"Tactician",about:"I know.",type:"INT",level:2,bonus:{int:.2,energy:5,status:"Focused"}});var se=le,ce=P.a.Record({name:"",type:"",about:"",energy:0,bonus:{},onFail:{},onSuccess:{}}),ue={};ue[z.ATK_BASIC]=new ce({name:"Attack",type:"ATK",about:"Strike with your main hand weapon.",bonus:{atk:1.5,def:.8,agi:.75,int:.2},onFail:{text:"Your attack fails."},onSuccess:{text:"You attack succeeds.",dmg:.2}}),ue[z.ATK_DSTAB]=new ce({name:"Double Stab",type:"ATK",about:"Stabs twice quickly.",energy:20,bonus:{atk:1.6,def:.8,agi:1.1,int:.6},onFail:{text:"Your stab fails."},onSuccess:{text:"You stab your opponent twice and gain 5 energy.",dmg:.5,energy:5,status:["Bleeding"]}}),ue[z.ATK_SMASH]=new ce({name:"Smash",type:"ATK",about:"Smashes your opponent with your weapon.",energy:30,bonus:{atk:6,def:.5,agi:.4,int:.4},onFail:{text:"Your smash fails."},onSuccess:{text:"You smash and stun your opponenet.",dmg:.2,energy:5,status:["Stunned"]}}),ue[z.ATK_CHARGE]=new ce({name:"Charge",type:"ATK",about:"Charges your opponent.",energy:55,bonus:{atk:3,def:.9,agi:2.4,int:.5},onFail:{text:"Your charge fails."},onSuccess:{text:"Your charge succeeds.",dmg:.3,energy:10,status:["Stunned"]}}),ue[z.ATK_FINALBREATH]=new ce({name:"Final Breath",type:"ATK",about:"Strike your opponent with all you have.",energy:100,bonus:{atk:6,def:.3,agi:2,int:.6},onFail:{text:"Your strike fails.",selfstatus:["Stunned"],status:["Focused"]},onSuccess:{text:"Your strike destroy your target and instills fear.",dmg:.4,energy:20,selfstatus:["Berserk"],status:["Stunned","Bleeding"]}});var de=ue,Se={};Se[z.DEF_BASIC]=new ce({name:"Defend",type:"DEF",about:"Basic defense with a weapon or shield.",bonus:{atk:0,def:1.2,agi:.2,int:.2},onFail:{text:"Your defense fails."},onSuccess:{text:"You defend successfully.",energy:5}}),Se[z.DEF_PARRY]=new ce({name:"Parry",type:"DEF",about:"Deflect an attack.",energy:20,bonus:{atk:.8,def:1.4,agi:.8,int:.8},onFail:{text:"You parry fails."},onSuccess:{text:"You parry successfully.",steal:10}}),Se[z.DEF_BLOCK]=new ce({name:"Block",type:"DEF",about:"Prepare for a strong attack.",energy:35,bonus:{atk:0,def:4,agi:.2,int:.5},onFail:{text:"Your block fails."},onSuccess:{text:"You block successfully.",steal:5,selfstatus:["Focused"]}}),Se[z.DEF_DODGE]=new ce({name:"Dodge",type:"DEF",about:"Dodges a perceived attack.",energy:35,bonus:{atk:0,def:.5,agi:4,int:.5},onFail:{text:"You dodge fails."},onSuccess:{text:"You dodge the attack.",steal:5,selfstatus:["Focused"]}}),Se[z.DEF_COUNTER]=new ce({name:"Counter",type:"DEF",about:"Blocks or dodges an attack in advance, then deliver a sure strike back.",energy:60,bonus:{atk:1.5,def:3.2,agi:3.2,int:1.3},onFail:{text:"Your counter fails."},onSuccess:{text:"Your counter skillfully.",dmg:.4,selfstatus:["Focused"],status:["Bleeding"]}}),Se[z.STUNNED]=new ce({name:"STUNNED",type:"DEF",about:"STUN STATUS",energy:0,bonus:{atk:0,def:.8,agi:0,int:0},onFail:{text:"You are stunned!"},onSuccess:{text:"You are stunned!"}});var me=Se,pe={};pe[z.AGI_BASIC]=new ce({name:"Sneak",type:"AGI",about:"Slide and sneak attack.",bonus:{atk:.9,def:.8,agi:1.4,int:.3},onFail:{text:"Your sneak attack fails."},onSuccess:{text:"Your sneak attack succeeds.",dmg:.25}}),pe[z.AGI_BACKSTAB]=new ce({name:"Backstab",type:"AGI",about:"Go behind the opponent and stab quickly.",energy:20,bonus:{atk:1.5,def:.8,agi:2.5,int:.8},onFail:{text:"Your backstab fails to pierce your opponent's defense."},onSuccess:{text:"Your backstab succeeds.",dmg:.4,status:["Bleeding"]}}),pe[z.AGI_QUICKSTRIKE]=new ce({name:"Quick strike",type:"AGI",about:"Strikes extremely quickly in a vital spot.",energy:30,bonus:{atk:1.2,def:.7,agi:6,int:.8},onFail:{text:"Your quickstrike failed.",selfstatus:["Stunned"]},onSuccess:{text:"Your aim is true.",dmg:.4,status:["Bleeding"]}}),pe[z.AGI_EVISCERATE]=new ce({name:"Eviserate",type:"AGI",about:"Go behind an enemy and perform a sure, targeted strike.",energy:40,bonus:{ignore:"DEF",atk:.4,def:.8,agi:1.2,int:1.2},onFail:{text:"Your dagger misses."},onSuccess:{text:"Your dagger pierces skin.",dmg:.5,status:["Bleeding"]}}),pe[z.AGI_ASSASSINATE]=new ce({name:"Assassinate",type:"AGI",about:"Assasinate your target.",energy:80,bonus:{atk:2,def:.5,agi:6,int:1.6},onFail:{text:"Your assassination failed.",selfstatus:["Stunned"]},onSuccess:{text:"You critically strike your target.",dmg:.6,energy:10,selfstatus:["Focused"],status:["Stunned","Bleeding"]}});var he=pe,ge={};ge[z.SPE_ESCAPE]=new ce({name:"Escape",type:"SPE",about:"Try to run away from battle.",bonus:{atk:.8,def:.8,agi:.8,int:.8},onFail:{text:"You fail to escape."},onSuccess:{text:"You manage to run away.",end:"Escape"}}),ge[z.SPE_WAIT]=new ce({name:"Wait",type:"SPE",about:"Do nothing.",bonus:{atk:0,def:.9,agi:1,int:.8},onFail:{text:"Well..."},onSuccess:{text:"Nothing interesting happens.",energy:10}}),ge[z.SPE_CHARGEUP]=new ce({name:"Charge Up",type:"SPE",about:"Prepare your energy.",bonus:{atk:0,def:.8,agi:.3,int:1},onFail:{text:"Your opponent distracts you.",energy:10},onSuccess:{text:"You charge up succesfully.",energy:25}}),ge[z.SPE_EXAMINE]=new ce({name:"Examine",type:"SPE",about:"Examine your opponent's weak points",bonus:{atk:0,def:1.1,agi:1.2,int:1.2},onFail:{text:"Your examine fails."},onSuccess:{text:"You find your opponent's weakness.",selfstatus:["Focused"]}}),ge[z.SPE_BERSERK]=new ce({name:"Berserk",type:"SPE",about:"Abandons your defense to deliver a devastating blow next turn.",bonus:{atk:0,def:0,agi:0,int:0},onFail:{text:"You are berserk.",energy:10,selfstatus:["Berserk"]},onSuccess:{text:"You are berserk.",energy:10,selfstatus:["Berserk"]}}),ge[z.SPE_BANDAGE]=new ce({name:"Bandage wounds",type:"SPE",about:"Bandage your wounds and slightly restores HP.",bonus:{atk:0,def:.8,agi:0,int:1.2},onFail:{text:"Your fail to heal yourself.",remove:["Bleeding"]},onSuccess:{text:"You banadage yourself succesfully.",heal:.1,remove:["Bleeding"]}}),ge[z.SPE_HEAL]=new ce({name:"Heal",type:"SPE",about:"Heals statuses and restores HP.",energy:20,bonus:{atk:0,def:.9,agi:.2,int:1.4},onFail:{text:"Your opponent takes advantage.",heal:.05,remove:["Bleeding"]},onSuccess:{text:"You heal yourself succesfully.",heal:.15,remove:["Bleeding","Poisoned"]}});var fe=ge,ye=P.a.Record(Object(s.a)({},se,de,me,he,fe)),Ee=P.a.Record({health:1,cst:100,atk:100,def:100,agi:100,int:100,inf:0,rep:10,passive:[],skill:z.BASIC,inventory:[]}),Ae=P.a.Record({type:void 0,turn:0,playerHp:0,playerEnergy:0,playerStatus:[],playerSkill:[],playerPassive:[],playerAtk:0,playerDef:0,playerAgi:0,playerInt:0,playerUsedUndying:!1,oppHp:0,oppEnergy:0,oppStatus:[],oppSkill:[],oppPassive:[],oppLogic:"",oppAtk:0,oppDef:0,oppAgi:0,oppInt:0,oppUsedUndying:!1,endResult:void 0}),be=P.a.Record({gameId:-1,time:0,gold:0,player:new Ee,playerView:"overview",prevLoc:"World_Lian",curLoc:"World_Lian",dialLocId:"",validLoc:["World_Lian"],LocData:new M,curChar:"",dialCharId:"",dialSysText:"",dialCharText:"",validChar:[],deadChar:[],doneSpar:[],doneChar:[],validSkill:[],validQuest:[],activeQuest:[],doneQuest:[],completeQuest:[],CharData:new oe,SkillData:new ye,SBState:new Ae});function Ie(e,t){for(var a in t)switch(a){case"cst":if(e.player.cst<t[a])return!1;break;case"atk":if(e.player.atk<t[a])return!1;break;case"def":if(e.player.def<t[a])return!1;break;case"agi":if(e.player.agi<t[a])return!1;break;case"int":if(e.player.int<t[a])return!1;break;case"inf":if(e.player.inf<t[a])return!1;break;case"rep":if(e.player.rep<t[a])return!1;break;case"gold":if(e.gold<t[a])return!1;break;case"timeStart":if(e.time<t[a])return!1;break;case"timeEnd":if(e.time>t[a])return!1;break;case"loc":for(var n in t[a])if(!e.validLoc.includes(t[a][n]))return!1;break;case"char":for(var r in t[a])if(!e.doneChar.includes(t[a][r]))return!1;break;case"skill":for(var o in t[a])if(!e.player.skill.includes(t[a][o]))return!1;break;case"dead":for(var i in t[a])if(!e.deadChar.includes(t[a][i]))return!1;break;case"quest":for(var l in t[a])if(!e.doneQuest.includes(t[a][l]))return!1;break;case"item":for(var s in t[a])if(!e.player.inventory.includes(t[a][s]))return!1;break;case"spar":for(var c in t[a])if(!e.doneSpar.includes(t[a][c]))return!1;break;default:return console.log("Error: Invalid requirement."),!1}return!0}function Te(e,t){if(!t||0===t.length)return!0;for(var a in t)if(Ie(e,t[a]))return!0;return!1}function ke(e,t){var a=e.CharData[t].interact;for(var n in a){if(a[n].validReq)switch(n){case"quest":e.validQuest.includes(t)||Te(e,a[n].validReq)&&(e=e.merge({validQuest:[].concat(Object(L.a)(e.validQuest),[t])}));break;case"teachSkill":e.validSkill.includes(a[n].skillId)||Te(e,a[n].validReq)&&(e=e.merge({validSkill:[].concat(Object(L.a)(e.validSkill),[a[n].skillId])}));break;default:console.log("Error: tried to check valid requirements in an unrecognized state."+n)}a[n].doneReq&&("quest"===n?!e.doneQuest.includes(t)&&e.validQuest.includes(t)&&Te(e,a[n].doneReq)&&(e=e.merge({doneQuest:[].concat(Object(L.a)(e.doneQuest),[t])})):console.log("Error: tried to check character interaction done for type that is not quest in UpdateReqs/updateChar")),e.doneChar.includes(t)||Te(e,e.CharData[t].doneReq)&&(e=e.merge({doneChar:[].concat(Object(L.a)(e.doneChar),[t])}))}return e}function _e(e,t){var a=e.LocData[t].parent,n=e.LocData[t].children,r=e.LocData[t].characters;if(""===a);else if(null===a)console.log("Error: parent is null in UpdateReqs/updateReqs.");else{if(!e.validLoc.includes(a))Te(e,e.LocData[a].validReq)&&(e=e.merge({validLoc:[].concat(Object(L.a)(e.validLoc),[a])}))}if(""===t);else if(null===t)console.log("Error: parent is null in UpdateReqs/updateReqs.");else{if(!e.validLoc.includes(t))Te(e,e.LocData[t].validReq)&&(e=e.merge({validLoc:[].concat(Object(L.a)(e.validLoc),[t])}))}if(null===n)console.log("Error: children are null in UpdateReqs/updateReqs");else if(0===n.length);else for(var o in n){if(!e.validLoc.includes(n[o]))Te(e,e.LocData[n[o]].validReq)&&(e=e.merge({validLoc:[].concat(Object(L.a)(e.validLoc),[n[o]])}))}if(null===r)console.log("Error: characters are null in UpdateReqs/updateReq");else if(0===r.length);else for(var i in r){if(!e.validChar.includes(r[i]))Te(e,e.CharData[r[i]].validReq)&&(e=e.merge({validChar:[].concat(Object(L.a)(e.validChar),[r[i]])}));if(!e.doneChar.includes(r[i]))Te(e,e.CharData[r[i]].doneReq)&&(e=e.merge({doneChar:[].concat(Object(L.a)(e.doneChar),[r[i]])}));ke(e,r[i])}return e}function ve(e,t){for(var a in t)switch(a){case"inf":e=e.merge({player:e.player.merge({inf:e.player.inf+t[a]})});break;case"rep":e=e.merge({player:e.player.merge({rep:e.player.rep+t[a]})});break;case"gold":e=e.merge({gold:e.gold+t[a]});break;case"item":var n=Object(L.a)(e.player.inventory);n.push(t[a]),e=e.merge({player:e.player.merge({inventory:n})});break;case"skill":var r=Object(L.a)(e.player.skill);r.includes(t[a])||(r.push(t[a]),e=e.merge({player:e.player.merge({skill:r})}));break;case"passive":var o=Object(L.a)(e.player.passive);o.includes(t[a])||(o.push(t[a]),e=e.merge({player:e.player.merge({passive:o})}));break;case"atk":e=e.merge({player:e.player.merge({atk:e.player.atk+t[a]})});break;case"def":e=e.merge({player:e.player.merge({def:e.player.def+t[a]})});break;case"agi":e=e.merge({player:e.player.merge({agi:e.player.agi+t[a]})});break;case"cst":e=e.merge({player:e.player.merge({cst:e.player.cst+t[a]})});break;case"health":e=e.merge({player:e.player.merge({health:e.player.health+t[a]})});break;default:console.log("Invalid reward type: "+a)}return e}var Ce=function(e,t){var a=function(a){switch(a){case"item":var n=Object(L.a)(e.player.inventory),r=function(e){console.log(n),n.includes(t[a][e])&&(n=n.filter(function(n){return n!==t[a][e]}),console.log(n))};for(var o in t[a])r(o);e=e.merge({player:e.player.merge({inventory:n})});break;case"gold":e=e.merge({gold:e.gold-t[a]});break;default:console.log("Invalid take type, ",a)}};for(var n in t)a(n);return e};function Re(e){var t=[],a=Object(L.a)(e);for(var n in a)if("object"===typeof a[n])for(var r in a[n])t.includes(a[n][r])||t.push(a[n][r]);else"string"===typeof a[n]&&(t.includes(a[n])||t.push(a[n]));return console.log("newskilllist: ",t),t}function we(e,t){var a={cst:0,atk:0,def:0,agi:0,int:0,energy:0,status:[],named:[]},n=Object(L.a)(t);for(var r in console.log(n),n){var o=e.SkillData[n[r]].bonus;for(var i in o)console.log("Checking that status bonuskey works: ",i),"status"===i?a.status.push(o[i]):a[i]+=o[i]}return n.includes(z.PAS_FATED)&&"Battle"===e.curLoc&&a.named.push(z.PAS_FATED),n.includes(z.PAS_UNDYING)&&"Battle"===e.curLoc&&a.named.push(z.PAS_UNDYING),a}function Le(e){var t=e.player,a=e.CharData[e.curChar],n=we(e,t.passive),r=we(e,a.passive);return new Ae({type:"Spar",playerHp:Math.round(t.cst*(1+n.cst)*t.health),playerEnergy:Math.round(n.energy),playerStatus:n.status,playerSkill:Re(t.skill),playerPassive:t.passive.filter(function(e){return e!==z.PAS_FATED&&e!==z.PAS_UNDYING}),playerAtk:Math.round(t.atk*(1+n.atk)*t.health)+1e3,playerDef:Math.round(t.def*(1+n.def)*t.health),playerAgi:Math.round(t.agi*(1+n.agi)*t.health),playerInt:Math.round(t.int*(1+n.int)*t.health),oppHp:Math.round(a.cst*(1+r.cst)),oppEnergy:Math.round(r.energy),oppStatus:r.status,oppSkill:Re(a.skill).filter(function(e){return e!==z.SPE_ESCAPE&&e!==z.SPE_INTIMIDATE}),oppPassive:a.passive.filter(function(e){return e!==z.PAS_FATED&&e!==z.PAS_UNDYING}),oppLogic:a.logic,oppAtk:Math.round(a.atk*(1+r.atk)),oppDef:Math.round(a.def*(1+r.def)),oppAgi:Math.round(a.agi*(1+r.agi)),oppInt:Math.round(a.int*(1+r.int))})}function De(e){var t="";if(e.dmg&&(t+="DMG: "+e.dmg+"; "),e.status){for(var a in t+="Opp status:",e.status)t+=" "+e.status[a];t+="; "}if(e.steal&&(t+="Steal: "+e.steal+" energy; "),e.selfstatus){for(var n in t+="Self status:",e.selfstatus)t+=" "+e.selfstatus[n];t+="; "}if(e.energy&&(t+="Gain: "+e.energy+" energy; "),e.heal&&(t+="Heal: "+e.heal+"*INT HP; "),e.remove){for(var r in t+="Remove:",e.remove)t+=" "+e.remove[r];t+="; "}return e.end?t+="End on: "+e.end+".":(t=t.substring(0,t.length-2),t+="."),t}var Pe=function(e){var t=e.bonus,a=e.onFail,n=e.onSuccess,r="Costs "+e.energy+" energy.";return r+=" ATK: "+t.atk+"; DEF: "+t.def+"; AGI: "+t.agi+"; INT: "+t.int+".",Object.keys(a).length>1&&(r+="\n On Fail, ",r+=De(a)),r+="\n On success, ",r+=De(n)};var Ne=function(e,t,a){return e.oppSkill[0]};var Be=function(e,t,a){switch(e.oppLogic){case J.BASIC:return Ne(e,t,a);default:return console.log("CRITICAL ERROR: Undefined player logic: ",e.oppLogic),console.log(e.oppSkill[1]),e.oppSkill[1]}};var Oe=function(e,t){if(e.SBState.endResult)return e.merge({dialSysText:"You can't do that! The fight has ended."});var a=e.SkillData[t];if(a.energy>e.SBState.playerEnergy)return e.merge({dialSysText:"You do not have enough energy for that!"});var n=e.SkillData[Be(e.SBState,e.SkillData,t)],r=a.type,o=a.bonus,i=n.type,l=n.bonus;e.SBState.playerStatus.includes("Stunned")&&(a=e.SkillData[z.STUNNED],r="STUNNED",o={atk:0,def:.8,agi:0,int:0}),e.SBState.oppStatus.includes("Stunned")&&(n=e.SkillData[z.STUNNED],i="STUNNED",l={atk:0,def:.8,agi:0,int:0});var s=function(e,t,a,n,r,o,i){function l(a){function n(t,a){for(var n in t)switch(n){case"text":"Player"===a?o.sysText=t[n]:"Opp"===a&&(i.sysText=t[n]);break;case"dmg":"Player"===a?i.hp-=(s-m)*t[n]:"Opp"===a&&(o.hp-=(S-c)*t[n]);break;case"status":if("Player"===a)for(var r in t[n])i.status.push(t[n][r]);else if("Opp"===a)for(var l in t[n])o.status.push(t[n][l]);break;case"selfstatus":if("Player"===a)for(var u in t[n])o.status.push(t[n][u]);else if("Opp"===a)for(var p in t[n])i.status.push(t[n][p]);break;case"steal":if("Player"===a){var h=Math.min(t[n],e.oppEnergy);o.energy+=h,i.energy-=h}else if("Opp"===a){var g=Math.min(t[n],e.playerEnergy);i.energy+=g,o.energy-=g}break;case"energy":"Player"===a?o.energy+=t[n]:"Opp"===a&&(i.energy+=t[n]);break;case"remove":if("Player"===a)for(var f in t[n])o.removeStatus.push(t[n][f]);else if("Opp"===a)for(var y in t[n])i.removeStatus.push(t[n][y]);break;case"heal":"Player"===a?o.hp+=d*t[n]:"Opp"===a&&(i.hp+=d*t[n]);break;case"end":"Player"===a&&(o.end=t[n]),"Opp"===a&&(i.end=t[n]);break;default:console.log("Error: Invalid effects key, ",n)}}var o={sysText:"",hp:0,energy:0,status:[],removeStatus:[]},i={sysText:"",hp:0,energy:0,status:[],removeStatus:[]};switch(a){case"None":n(t.onFail,"Player"),n(r.onFail,"Opp");break;case"Both":n(t.onSuccess,"Player"),n(r.onSuccess,"Opp");break;case"Player":n(t.onSuccess,"Player"),n(r.onFail,"Opp");break;case"Opp":n(t.onFail,"Player"),n(r.onSuccess,"Opp");break;case"PlayerAgi":n(t.onSuccess,"Player"),i.sysText=r.onFail.text,r.onSuccess.dmg&&(o.hp-=(S-c)*r.onSuccess.dmg*(p/u)*.5,i.sysText="You scrape your opponent.");break;case"OppAgi":o.sysText=t.onFail.text,n(r.onSuccess,"Opp"),t.onSuccess.dmg&&(i.hp-=(s-m)*t.onSuccess.dmg*(u/p)*.5,o.sysText="You scrape your opponent.");break;case"PlayerPartial":o.sysText=t.onFail.text,i.sysText=r.onFail.text,t.onSuccess.dmg&&(i.hp-=(s-m)*t.onSuccess.dmg*(p/u)*.5,o.sysText="You scrape your opponent.");break;case"OppPartial":o.sysText=t.onFail.text,i.sysText=r.onFail.text,r.onSuccess.dmg&&(o.hp-=(S-c)*r.onSuccess.dmg*(u/p)*.5,i.sysText="You scrape your opponent.");break;default:console.log("Error: Invalid winner type, ",a)}return{winnerType:a,player:o,opp:i,faster:u>p?"Player":"Opp"}}var s=e.playerAtk*a.atk,c=e.playerDef*a.def,u=e.playerAgi*a.agi,d=e.playerInt*a.int,S=e.oppAtk*o.atk,m=e.oppDef*o.def,p=e.oppAgi*o.agi,h=e.oppInt*o.int;if(e.playerStatus.includes("Berserk")&&(s*=2,c*=0,u*=2,d*=0),e.oppStatus.includes("Berserk")&&(S*=2,m*=0,p*=2,h*=0),e.playerStatus.includes("Focus")&&(s+=d,c+=d,u+=d),e.oppStatus.includes("Focus")&&(S+=h,m+=h,p+=h),console.log("Player Stats:",s,c,u),console.log("Opp Stats:",S,m,p),"STUNNED"===n){if("STUNNED"===i)return l("None");if("DEF"===i)return l("None");if("SPE"===i)return l("Opp")}if("STUNNED"===i){if("DEF"===n)return l("None");if("SPE"===n)return l("Player")}return"DEF"===n&&"DEF"===i?l("None"):"DEF"===n&&"SPE"===i?l("Opp"):"SPE"===n&&"DEF"===i?l("Player"):"SPE"===n&&"SPE"===i?l("Both"):"Escape"===t.name&&u+d>p+Math.max(e.oppInt,h)?l("Player"):"Escape"===r.nName&&p+h>u+Math.max(e.playerInt,d)?l("Opp"):"DEF"===n||"STUNNED"===n?o.ignore&&"DEF"===o.ignore?u>2*p?l("Player"):(c=0,l("Opp")):l(S>c?u>2*p?"Player":u>1.5*p?"PlayerAgi":"Opp":"STUNNED"!==n?"Player":"None"):"DEF"===i||"STUNNED"===i?a.ignore&&"DEF"===a.ignore?p>2*u?l("Opp"):(m=0,l("Player")):l(s>m?p>2*u?"Opp":p>1.5*u?"OppAgi":"Player":"STUNNED"!==i?"Opp":"None"):l(u>2*p?s>m?"Player":"None":u>1.5*p?s>m?"PlayerAgi":S>c?"OppPartial":"None":p>2*u?S>c?"Opp":"None":p>1.5*u?S>c?"OppAgi":s>S?"PlayerPartial":"None":s>m&&S>c?"Both":s<=m&&S<=c?"None":s>m&&S<=c?"Player":s<=m&&S>c?"Opp":"None")}(e.SBState,a,o,r,n,l,i);console.log(s),console.log("Player Status:",e.SBState.playerStatus),console.log("Opp Status:",e.SBState.oppStatus);var c=void 0,u=e.SBState.playerHp+Math.round(s.player.hp),d=e.SBState.playerEnergy+Math.round(s.player.energy)+10-a.energy,S=!1,m=e.SBState.oppHp+Math.round(s.opp.hp),p=e.SBState.oppEnergy+Math.round(s.opp.energy)+10-n.energy,h=!1,g=Object(L.a)(e.SBState.playerStatus),f=Object(L.a)(e.SBState.oppStatus);if(g=g.filter(function(e){return"Stunned"!==e&&"Focused"!==e}),f=f.filter(function(e){return"Stunned"!==e&&"Focused"!==e}),"Player"===s.faster){var y=function(e){g=g.filter(function(t){return t!==s.player.removeStatus[e]})};for(var E in s.player.removeStatus)y(E);for(var E in s.player.status)g.push(s.player.status[E]);for(var A in s.opp.status)f.push(s.opp.status[A]);var b=function(e){f=f.filter(function(t){return t!==s.opp.removeStatus[e]})};for(var I in s.opp.removeStatus)b(I)}else if("Opp"===s.faster){for(var T in s.player.status)g.push(s.player.status[T]);var k=function(e){g=g.filter(function(t){return t!==s.player.removeStatus[e]})};for(var _ in s.player.removeStatus)k(_);var v=function(e){f=f.filter(function(t){return t!==s.opp.removeStatus[e]})};for(var C in s.opp.removeStatus)v(C);for(var R in s.opp.status)f.push(s.opp.status[R])}else console.log("Invalid winner");g.includes("Bleeding")&&(u-=Math.round(.05*e.SBState.oppAtk)),f.includes("Bleeding")&&(m-=Math.round(.05*e.SBState.playerAtk)),u<=0&&e.SBState.playerPassive.includes(z.PAS_UNDYING)&&!e.SBState.playerUsedUndying&&(u=Math.round(.2*e.SBState.playerHp),g=[],S=!0),m<=0&&e.SBState.oppPassive.includes(z.PAS_UNDYING)&&!e.SBState.oppUsedUndying&&(m=Math.round(.2*e.SBState.playerHp),f=[],h=!0),u<=0&&m<=0?c="Tie":u<=0?c="Win-opp":m<=0&&(c="Win-player"),"Escape"===s.player.end&&(c="Escape-player"),"Escape"===s.opp.end&&(c="Escape-opp");var w=s.player.sysText+" "+s.opp.sysText;return Math.round(s.player.hp)>0&&(w+=" You gain "+Math.round(s.player.hp)+" health.",s.player.energy>0&&(w=w.substr(0,w.length-1),w+=" and "+Math.round(s.player.energy)+" energy.")),g=Object(L.a)(new Set(g)),f=Object(L.a)(new Set(f)),e.merge({dialSysText:w,SBState:e.SBState.merge({turn:e.SBState.turn+1,playerHp:u,playerEnergy:d,playerStatus:g,playerUsedUndying:S&&e.SBState.playerUsedUndying,oppHp:m,oppEnergy:p,oppStatus:f,oppUsedUndying:h&&e.SBState.oppUsedUndying,endResult:c})})};var Ge=function(e){var t=e.SBState.type,a=e.SBState.endResult;if("Spar"===t)switch(a){case"Win-player":return e.doneSpar.includes(e.curChar)?e.merge({curLoc:e.prevLoc,dialSysText:"You have defeated "+e.CharData[e.curChar].name+"."}):(e=ve(e,e.CharData[e.curChar].interact.spar.reward)).merge({curLoc:e.prevLoc,dialSysText:"You have won!",doneSpar:[].concat(Object(L.a)(e.doneSpar),[e.curChar])});case"Win-opp":return e.merge({curLoc:e.prevLoc,dialSysText:"You have lost the spar."});case"Tie":return e.merge({curLoc:e.prevLoc,dialSysText:"There is no winner."});case"Escape-player":return e.merge({curLoc:e.prevLoc,dialSysText:"Coward...."});case"Escape-opp":return e.doneSpar.includes(e.curChar)?e.merge({curLoc:e.prevLoc,dialSysText:e.CharData[e.curChar].name+" ran away."}):(e=ve(e,e.CharData[e.curChar].interact.spar.reward)).merge({curLoc:e.prevLoc,dialSysText:"Your opponent ran away! You won.",doneSpar:[].concat(Object(L.a)(e.doneSpar),[e.curChar])});default:return console.log("ERROR: Invalid end result in spar:",a),e.merge({curLoc:e.prevLoc})}return e},He="LOC",xe="ELE",Fe="INT",qe="ITM",We="SKL",Ye={LOC:"Location",ELE:"Element",INT:"Interaction",ITM:"Item",PAS:"Passive",SKL:"Skill",TYP:"Type",LGC:"Logic",TLK:"Talk",LRN:"Learn",QST:"Quest",SPR:"Spar",BTL:"Battle",TRD:"Trade",WPN:"Weapon",AMR:"Armor",OTH:"Other",ATK:"Attack",DEF:"Defense",AGI:"Agility"},Ue={Location:{},Element:{},Interaction:{Talk:{},Learn:{},Quest:{},Spar:{},Battle:{},Trade:{}},Item:{Weapon:{},Armor:{},Quest:{},Other:{}},Passive:{},Skill:{Attack:{},Defense:{},Agility:{},Other:{}},Type:{},Logic:{}},je={};function Ke(e,t,a){this.id=e,this.parent=t,this.children=[],this.name="",this.about="",this.showReqs=[],this.validReqs=[],this.doneReqs=[],"object"===typeof a?(a.name?this.name=a.name:console.log("Warning: Created an object,",e,"with no name."),a.about?this.about=a.about:console.log("Warning: Created an object,",e,"with no about."),a.showReqs&&(this.showReqs=a.showReqs),a.validReqs&&(this.validReqs=a.validReqs),a.doneReqs&&(this.doneReqs=a.doneReqs)):console.log("Warning: Created an object,",e,"with no context.")}var Me={_validateString:function(e){return null!==e&&(void 0!==e&&("string"===typeof e&&0!==e.length))},_idExists:function(e){return e in je},_getObjType:function(e){return e.substring(0,3)},_getObjSubType:function(e){return e.substring(4,7)},_delete:function(e){if(!this._idExists(e))throw new ReferenceError("Id does not exist,",e);for(var t in je[e].children)this._delete(je[e].children[t]);var a=this._getObjType(e),n=void 0;if(a===He)for(var r in je[e].elements)this.delete(je[e].elements[r]);a!==Fe&&a!==qe&&a!==We||(n=this._getObjSubType(e)),a=Ye[a],console.log(a,e),void 0!==n?(n=Ye[n],delete Ue[a][n][e]):delete Ue[a][e],delete je[e]},create:function(e,t,a){throw new ReferenceError("Invalid call of create",e)},delete:function(e){if(!this._idExists(e))throw new ReferenceError("Id does not exist,",e);console.log("Warning: Deleted object",e,"and all objects reliant on it.");var t=je[e].parent;this._delete.call(this,e),this._getObjType(e)===xe?je[t].elements.splice(je[t].elements.indexOf(e),1):je[t].children.splice(je[t].children.indexOf(e),1)},getParent:function(e){if(this._idExists(e))return je[e].parent;throw new ReferenceError(e)},setParent:function(e,t){throw new ReferenceError("Invalid call of setParent:",e)},getChildren:function(e){if(this._idExists(e))return je[e].children},setChildren:function(e,t){throw new ReferenceError("Invalid call of setChildren:",e)},addChildren:function(e,t){throw new ReferenceError("Invalid call of addChildren:",e)},getName:function(e){if(this._idExists(e))return je[e].name;throw new ReferenceError(e)},setName:function(e,t){if(this._idExists(e))return je[e].name=t,!0;throw new ReferenceError(e)},getAbout:function(e){if(this._idExists(e))return je[e].about;throw new ReferenceError(e)},setAbout:function(e,t){if(this._idExists(e))return je[e].about=t,!0;throw new ReferenceError(e)},getShowReqs:function(e){if(this._idExists(e))return je[e].showReqs;throw new ReferenceError(e)},setShowReqs:function(e,t){if(this._idExists(e))return je[e].showReqs=t,!0;throw new ReferenceError(e)},getValidReqs:function(e){if(this._idExists(e))return je[e].validReqs;throw new ReferenceError(e)},setValidReqs:function(e,t){if(this._idExists(e))return je[e].validReqs=t,!0;throw new ReferenceError(e)},getDoneReqs:function(e){if(this._idExists(e))return je[e].doneReqs;throw new ReferenceError(e)},setDoneReqs:function(e,t){if(this._idExists(e))return je[e].doneReqs=t,!0;throw new ReferenceError(e)}},Qe={verboseLog:!1,statBuild:!0,statBuildFreq:20},Ve=0,ze=0;function Je(e,t,a){Ke.call(this,e,t,a),this.elements=[],a?a.elements&&(Array.isArray(a.elements)&&(this.elements=a.elements),console.log("Warning: Added elements in location constructor")):"LOC"!==e&&console.log("Warning: Created a new location with no context:",e)}var Xe=new Je("LOC",void 0,void 0);je.LOC=Xe,Ue.Location.LOC="LOC";var Ze=Object.create(Me);Ze._idExists=function(e){return e in Ue.Location},Ze.addChildren=function(e,t){je[t].children.push(e)},Ze.setChildren=function(e,t){if(!this._idExists(e))throw new ReferenceError("Id does not exist,",e);console.log("Warning: Setting children without properly deleting them may cause unreferend locations."),je[e].children=t},Ze.addElement=function(e,t){if(!this._idExists(t))throw new ReferenceError("Location to add element does not exist.");je[t].elements.push(e)},Ze.create=function(e,t,a){if(Qe.statBuild&&Ve%Qe===0&&console.log("Tried to build "+Ve+" locations and succeeded on "+ze+" of them."),Ve+=1,!this._idExists(t))throw new ReferenceError("Parent does not exist,",t);var n=function(e,t){return t+"_"+(e=e.toUpperCase())}(e,t);if(this._idExists(n))throw new ReferenceError("Duplicate keys,",n);var r=new Je(n,t,a);je[n]=r,Ue.Location[n]=n,this.addChildren(n,t),ze+=1};var $e=Ze,et=0,tt=0;function at(e,t,a){Ke.call(this,e,t,a),this.type="TYPE_NONE",this.logic="LOGIC_BASIC",a?(a.type&&"string"===typeof a.type&&(this.type=a.type),a.logic&&"string"===typeof a.logic&&(this.logic=a.logic)):console.log("Warning: Created a game element",e,"with no context in,",t)}var nt=Object.create(Me);nt.create=function(e,t,a){if(Qe.statBuild&&et%Qe===0&&console.log("Tried to build "+et+" elements and succeeded on "+tt+" of them."),et+=1,this._getObjType(t)!==He)throw new ReferenceError("Parent of element not a location.");if(!$e._idExists(t))throw new ReferenceError("Parent location does not exist.");var n=function(e,t){return t+"_"+e.toUpperCase()}(e,t);if(this._idExists(n))throw new ReferenceError("Duplicate element name in location.");var r=new at(n,t,a);je[n]=r,Ue.Element[n]=n,$e.addElement(n,t),tt+=1};var rt=nt,ot="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(je)),it=document.createElement("a");it.href="data:"+ot,it.download="data.json",it.innerHTML="download JSON",document.getElementById("container").appendChild(it);var lt={GameObject:Me,Location:$e,Element:rt,LoadGame:function(){},SaveGame:function(){},LoadDeveloper:function(){},SaveGameVersion:function(){console.log("Saving: ",je),ot="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(je)),it.href="data:"+ot},printData:function(){console.log(je)}},st=new(function(e){function t(){return Object(k.a)(this,t),Object(v.a)(this,Object(C.a)(t).call(this,b))}return Object(R.a)(t,e),Object(_.a)(t,[{key:"getInitialState",value:function(){return lt.Location.create("World","LOC"),lt.printData(),lt.Location.create("Dojo","LOC_WORLD"),lt.Location.create("School","LOC_WORLD"),lt.Location.create("Shop","LOC_WORLD"),lt.Location.delete("LOC_WORLD"),lt.SaveGameVersion(),_e(new be,"World_Lian")}},{key:"reduce",value:function(e,t){switch(t.type){case A.SWITCH_LOCATION:return e=_e(e,t.locId),"Back"===t.locId?e.merge({curLoc:e.prevLoc,curChar:"",dialLocId:"",dialCharId:"",dialSysText:"",dialCharText:""}):e.merge({prevLoc:e.curLoc,curLoc:t.locId,curChar:"",dialLocId:"",dialCharId:"",dialSysText:"",dialCharText:"",time:e.time+e.LocData[t.locId].time});case A.DIAL_LOC_ABOUT:return e.merge({dialLocId:t.locId,dialCharId:"",dialSysText:e.LocData[t.locId].about,dialCharText:""});case A.DIAL_CHAR_ABOUT:return(e=ke(e,t.charId)).merge({curChar:t.charId,dialSysText:e.CharData[t.charId].about,dialCharText:"",dialCharId:t.charId});case A.DIAL_CHAR_TALK:return e.merge({dialSysText:"",dialCharText:t.dialCharText});case A.DIAL_SKILL_INFO:return e.merge({dialSysText:Pe(e.SkillData[t.skillId]),dialCharText:""});case A.SWITCH_PLAYER_VIEW:return e.merge({playerView:t.playerView});case A.CHAR_INTERACT_TRAIN:var a=e.CharData[e.dialCharId][t.stat]-e.player[t.stat];a=Math.max(a,1),a=Math.log(a*t.multiplier);var n=0|(a=Math.round(a));return ke(e=e.merge({player:e.player.set(t.stat,e.player[t.stat]+n),dialCharText:"",dialSysText:"You gained "+n+" points in "+t.stat.toUpperCase(),time:e.time+e.CharData[e.curChar].interact.train.time}),e.dialCharId);case A.CHAR_INTERACT_LEARN:var r=Object(L.a)(e.player.skill);return r.push(t.skillId),ke(e=e.merge({player:e.player.set("skill",r),dialCharText:"",dialSysText:"Congrats! You have learned "+t.skillId,time:e.time+t.time}),e.dialCharId);case A.CHAR_INTERACT_START_QUEST:return e.merge({activeQuest:[].concat(Object(L.a)(e.activeQuest),[t.charId]),dialCharText:e.CharData[e.dialCharId].interact.quest.about,dialSysText:"You have started a quest for "+e.CharData[e.dialCharId].name});case A.CHAR_INTERACT_INFO_QUEST:return e.merge({dialCharText:e.CharData[e.dialCharId].interact.quest.about,dialSysText:""});case A.CHAR_INTERACT_COMPLETE_QUEST:return(e=ve(e,e.CharData[t.charId].interact.quest.reward)).CharData[t.charId].interact.quest.take&&(e=Ce(e,e.CharData[t.charId].interact.quest.take)),e.merge({completeQuest:[].concat(Object(L.a)(e.completeQuest),[t.charId]),activeQuest:e.activeQuest.filter(function(e){return e!==t.charId}),dialCharText:e.CharData[e.dialCharId].interact.quest.doneText,dialSysText:"You have completed the quest for "+e.CharData[e.dialCharId].name});case A.CHAR_INTERACT_SB:return"Spar"===t.sbType?e.merge({time:e.time+e.CharData[e.curChar].interact.spar.time,prevLoc:e.curLoc,curLoc:"Spar",playerView:"overview",SBState:Le(e)}):e;case A.CHAR_INTERACT_END_SB:return e=Ge(e),console.log(e.curLoc),_e(e=ke(e,e.curChar),e.curLoc);case A.SB_PROCESS_MOVE:return Oe(e,t.skillId);default:return e}}}]),t}(l.ReduceStore));var ct=l.Container.createFunctional(g,function(){return[w,st]},function(){return{screenState:w.getState(),gameState:st.getState(),onSwitchScreen:I.switchScreen,onChangeName:I.changeName,onChangeGameId:I.ChangeGameId,onSwitchLocation:T.switchLocation,onDialLocAbout:T.dialLocAbout,onDialCharAbout:T.dialCharAbout,onDialCharTalk:T.dialCharTalk,onDialSkillInfo:T.dialSkillInfo,onSwitchPlayerView:T.switchPlayerView,onTrain:T.train,onLearnSkill:T.learnSkill,onStartQuest:T.startQuest,onInfoQuest:T.infoQuest,onCompleteQuest:T.completeQuest,onStartSB:T.startSB,onEndSB:T.endSB,onProcessSBMove:T.processSBMove}});a(195);i.a.render(r.a.createElement(ct,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a(196)}},[[91,1,2]]]);
//# sourceMappingURL=main.bf7a5209.chunk.js.map